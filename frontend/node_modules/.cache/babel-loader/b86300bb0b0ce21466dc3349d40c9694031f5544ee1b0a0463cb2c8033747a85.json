{"ast":null,"code":"import{createContext,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const navigate=useNavigate();const[user,setUser]=useState(JSON.parse(localStorage.getItem(\"user\")||\"null\"));const[token,setToken]=useState(localStorage.getItem(\"token\")||null);// load from localStorage on refresh\nuseEffect(()=>{if(token)localStorage.setItem(\"token\",token);else localStorage.removeItem(\"token\");if(user)localStorage.setItem(\"user\",JSON.stringify(user));else localStorage.removeItem(\"user\");},[token,user]);const login=(userObj,jwt)=>{setUser(userObj);setToken(jwt);localStorage.setItem(\"userName\",(userObj===null||userObj===void 0?void 0:userObj.name)||(userObj===null||userObj===void 0?void 0:userObj.username)||\"User\");};const logout=()=>{setUser(null);setToken(null);localStorage.removeItem(\"userName\");localStorage.removeItem(\"user\");localStorage.removeItem(\"token\");navigate(\"/login\");};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,login,logout},children:children});};","map":{"version":3,"names":["createContext","useState","useEffect","useNavigate","jsx","_jsx","AuthContext","AuthProvider","_ref","children","navigate","user","setUser","JSON","parse","localStorage","getItem","token","setToken","setItem","removeItem","stringify","login","userObj","jwt","name","username","logout","Provider","value"],"sources":["C:/Users/karan/OneDrive/Desktop/reactcourse/project2/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate  } from \"react-router-dom\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"user\") || \"null\"));\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || null );\r\n\r\n  // load from localStorage on refresh\r\n  useEffect(() => {\r\n    if (token) localStorage.setItem(\"token\",token);\r\n      else localStorage.removeItem(\"token\");\r\n    if (user) localStorage.setItem(\"user\", JSON.stringify(user));\r\n      else localStorage.removeItem(\"user\");\r\n  }, [token,user]);\r\n\r\n  const login = (userObj, jwt) => {\r\n    setUser(userObj);\r\n    setToken(jwt);\r\n    localStorage.setItem(\"userName\", userObj?.name || userObj?.username || \"User\");\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setToken(null);\r\n\r\n    localStorage.removeItem(\"userName\");\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"token\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n\r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAS,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhD,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAAE,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAACY,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAI,MAAM,CAAC,CAAC,CACpF,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAACc,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAI,IAAK,CAAC,CAE1E;AACAd,SAAS,CAAC,IAAM,CACd,GAAIe,KAAK,CAAEF,YAAY,CAACI,OAAO,CAAC,OAAO,CAACF,KAAK,CAAC,CAAC,IACxC,CAAAF,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CACvC,GAAIT,IAAI,CAAEI,YAAY,CAACI,OAAO,CAAC,MAAM,CAAEN,IAAI,CAACQ,SAAS,CAACV,IAAI,CAAC,CAAC,CAAC,IACtD,CAAAI,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC,CACxC,CAAC,CAAE,CAACH,KAAK,CAACN,IAAI,CAAC,CAAC,CAEhB,KAAM,CAAAW,KAAK,CAAGA,CAACC,OAAO,CAAEC,GAAG,GAAK,CAC9BZ,OAAO,CAACW,OAAO,CAAC,CAChBL,QAAQ,CAACM,GAAG,CAAC,CACbT,YAAY,CAACI,OAAO,CAAC,UAAU,CAAE,CAAAI,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEE,IAAI,IAAIF,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEG,QAAQ,GAAI,MAAM,CAAC,CAChF,CAAC,CAED,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnBf,OAAO,CAAC,IAAI,CAAC,CACbM,QAAQ,CAAC,IAAI,CAAC,CAEdH,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC,CACnCL,YAAY,CAACK,UAAU,CAAC,MAAM,CAAC,CAC/BL,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAChCV,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,mBACEL,IAAA,CAACC,WAAW,CAACsB,QAAQ,EAACC,KAAK,CAAE,CAAElB,IAAI,CAAEM,KAAK,CAAEK,KAAK,CAAEK,MAAO,CAAE,CAAAlB,QAAA,CACzDA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}